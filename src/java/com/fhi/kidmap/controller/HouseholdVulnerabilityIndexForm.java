/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package com.fhi.kidmap.controller;

import com.fhi.nomis.nomisutils.AppUtility;
import com.fhi.nomis.nomisutils.ValidationManager;
import java.util.ArrayList;
import java.util.List;
import javax.servlet.http.HttpServletRequest;

import org.apache.struts.action.ActionErrors;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.action.ActionMessage;

/**
 *
 * @author smomoh
 */
public class HouseholdVulnerabilityIndexForm extends org.apache.struts.action.ActionForm {
    
    private String actionName;
    private String hhSurname;
    private String hhFirstname;
    private String address;
    private String phone;
    private int noOfChildrenInhh;
    private int noOfPeopleInhh;
    private String hhUniqueId;
    private String dateOfAssessment;
    private int hhAge;
    private int hiddenAssessmentId;
    private String hhGender;

    private String careiverGender;
    private int caregiverAge;
    private String caregiverSurname;
    private String caregiverFirstname;
    private String maritalStatus;
    private String occupation;
    
    private int hhHeadship;
    private int health;
    private int educationLevel;
    private int hhEducationLevel;
    private int childEducationLevel;
    private int shelterAndHousing;
    private int foodSecurityAndNutrition;
    private int protection;
    private int meansOfLivelihood;
    private int hhIncome;
    private double latitude;
    private double longitude;
    private String eligibleForEnrollment;
    private String nameOfAssessor;
    private String designation;
    private String serialNo;
    private String stateCode;
    private String lgaCode;
    private String orgCode;
    private String communityCode;
    private String partnerCode;
    private String hivStatus;
    private String enrolledOnART;
    private String facilityId;
    private List referralDirectoryList=new ArrayList();

    public int getHiddenAssessmentId() {
        return hiddenAssessmentId;
    }

    public void setHiddenAssessmentId(int hiddenAssessmentId) {
        this.hiddenAssessmentId = hiddenAssessmentId;
    }

    public String getActionName() {
        return actionName;
    }

    public void setActionName(String actionName) {
        this.actionName = actionName;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public int getCaregiverAge() {
        return caregiverAge;
    }

    public void setCaregiverAge(int caregiverAge) {
        this.caregiverAge = caregiverAge;
    }

    public String getCaregiverFirstname() {
        return caregiverFirstname;
    }

    public void setCaregiverFirstname(String caregiverFirstname) {
        this.caregiverFirstname = caregiverFirstname;
    }

    public String getCaregiverSurname() {
        return caregiverSurname;
    }

    public void setCaregiverSurname(String caregiverSurname) {
        this.caregiverSurname = caregiverSurname;
    }

    public String getCareiverGender() {
        return careiverGender;
    }

    public void setCareiverGender(String careiverGender) {
        this.careiverGender = careiverGender;
    }

    public String getDateOfAssessment() {
        return dateOfAssessment;
    }

    public void setDateOfAssessment(String dateOfAssessment) {
        this.dateOfAssessment = dateOfAssessment;
    }

    public String getDesignation() {
        return designation;
    }

    public void setDesignation(String designation) {
        this.designation = designation;
    }

    public int getHhAge() {
        return hhAge;
    }

    public void setHhAge(int hhAge) {
        this.hhAge = hhAge;
    }

    public String getHhGender() {
        return hhGender;
    }

    public void setHhGender(String hhGender) {
        this.hhGender = hhGender;
    }
    
    public int getEducationLevel() {
        return educationLevel;
    }

    public void setEducationLevel(int educationLevel) {
        this.educationLevel = educationLevel;
    }

    public String getEligibleForEnrollment() {
        return eligibleForEnrollment;
    }

    public void setEligibleForEnrollment(String eligibleForEnrollment) {
        this.eligibleForEnrollment = eligibleForEnrollment;
    }

    public int getFoodSecurityAndNutrition() {
        return foodSecurityAndNutrition;
    }

    public void setFoodSecurityAndNutrition(int foodSecurityAndNutrition) {
        this.foodSecurityAndNutrition = foodSecurityAndNutrition;
    }

    public int getHealth() {
        return health;
    }

    public void setHealth(int health) {
        this.health = health;
    }

    public String getHhFirstname() {
        return hhFirstname;
    }

    public void setHhFirstname(String hhFirstname) {
        this.hhFirstname = hhFirstname;
    }

    public int getHhHeadship() {
        return hhHeadship;
    }

    public void setHhHeadship(int hhHeadship) {
        this.hhHeadship = hhHeadship;
    }

    public int getHhIncome() {
        return hhIncome;
    }

    public void setHhIncome(int hhIncome) {
        this.hhIncome = hhIncome;
    }

    public String getHhSurname() {
        return hhSurname;
    }

    public void setHhSurname(String hhSurname) {
        this.hhSurname = hhSurname;
    }

    public String getHhUniqueId() {
        return hhUniqueId;
    }

    public void setHhUniqueId(String hhUniqueId) {
        this.hhUniqueId = hhUniqueId;
    }

    public String getLgaCode() {
        return lgaCode;
    }

    public void setLgaCode(String lgaCode) {
        this.lgaCode = lgaCode;
    }

    public String getMaritalStatus() {
        return maritalStatus;
    }

    public void setMaritalStatus(String maritalStatus) {
        this.maritalStatus = maritalStatus;
    }

    public int getMeansOfLivelihood() {
        return meansOfLivelihood;
    }

    public void setMeansOfLivelihood(int meansOfLivelihood) {
        this.meansOfLivelihood = meansOfLivelihood;
    }

    public String getNameOfAssessor() {
        return nameOfAssessor;
    }

    public void setNameOfAssessor(String nameOfAssessor) {
        this.nameOfAssessor = nameOfAssessor;
    }

    public int getNoOfChildrenInhh() {
        return noOfChildrenInhh;
    }

    public void setNoOfChildrenInhh(int noOfChildrenInhh) {
        this.noOfChildrenInhh = noOfChildrenInhh;
    }

    public int getNoOfPeopleInhh() {
        return noOfPeopleInhh;
    }

    public void setNoOfPeopleInhh(int noOfPeopleInhh) {
        this.noOfPeopleInhh = noOfPeopleInhh;
    }

    public String getOccupation() {
        return occupation;
    }

    public void setOccupation(String occupation) {
        this.occupation = occupation;
    }

    public String getOrgCode() {
        return orgCode;
    }

    public void setOrgCode(String orgCode) {
        this.orgCode = orgCode;
    }

    public String getCommunityCode() {
        return communityCode;
    }

    public void setCommunityCode(String communityCode) {
        this.communityCode = communityCode;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public String getSerialNo() {
        return serialNo;
    }

    public void setSerialNo(String serialNo) {
        this.serialNo = serialNo;
    }

    public int getShelterAndHousing() {
        return shelterAndHousing;
    }

    public void setShelterAndHousing(int shelterAndHousing) {
        this.shelterAndHousing = shelterAndHousing;
    }

    public String getStateCode() {
        return stateCode;
    }

    public void setStateCode(String stateCode) {
        this.stateCode = stateCode;
    }
    public String getPartnerCode() {
        return partnerCode;
    }

    public void setPartnerCode(String partnerCode) {
        this.partnerCode = partnerCode;
    }

    public double getLatitude() 
    {
        return latitude;
    }

    public void setLatitude(double latitude) 
    {
        this.latitude = latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    public String getEnrolledOnART() {
        return enrolledOnART;
    }

    public void setEnrolledOnART(String enrolledOnART) {
        this.enrolledOnART = enrolledOnART;
    }

    public String getFacilityId() {
        return facilityId;
    }

    public void setFacilityId(String facilityId) {
        this.facilityId = facilityId;
    }

    public String getHivStatus() {
        return hivStatus;
    }

    public void setHivStatus(String hivStatus) {
        this.hivStatus = hivStatus;
    }

    public int getProtection() {
        return protection;
    }

    public void setProtection(int protection) {
        this.protection = protection;
    }

    public List getReferralDirectoryList() {
        return referralDirectoryList;
    }

    public void setReferralDirectoryList(List referralDirectoryList) {
        this.referralDirectoryList = referralDirectoryList;
    }

    public int getChildEducationLevel() {
        return childEducationLevel;
    }

    public void setChildEducationLevel(int childEducationLevel) {
        this.childEducationLevel = childEducationLevel;
    }

    public int getHhEducationLevel() {
        return hhEducationLevel;
    }

    public void setHhEducationLevel(int hhEducationLevel) {
        this.hhEducationLevel = hhEducationLevel;
    }



    public HouseholdVulnerabilityIndexForm() {
        super();
        // TODO Auto-generated constructor stub
    }
    private boolean isHouseholdAccessed()
    {
        if((getEducationLevel()==0 && this.getChildEducationLevel()==0) || getFoodSecurityAndNutrition()==0
         || getHealth()==0 || getMeansOfLivelihood()==0 || getShelterAndHousing()==0
         || getHhHeadship()==0 || getHhIncome()==0)
        return false;
        return true;
    }
    /*private boolean isHouseholdAccessed()
    {
        if(getEducationLevel()==0 && getFoodSecurityAndNutrition()==0
         && getHealth()==0 && getMeansOfLivelihood()==0 && getShelterAndHousing()==0
         && getHhHeadship()==0 && getHhIncome()==0)
        return false;
        return true;
    }*/
    @Override
    public void reset(ActionMapping mapping, HttpServletRequest request)
    {
        actionName=null;
        hhSurname=null;
        hhFirstname=null;
        caregiverSurname=null;
        caregiverFirstname=null;
        address=null;
        phone=null;
        noOfChildrenInhh=0;
        noOfPeopleInhh=0;
        hhAge=0;
        hhGender=null;
        hhUniqueId=null;
        serialNo=null;
        dateOfAssessment=null;
        careiverGender=null;
        caregiverAge=0;
        maritalStatus=null;
        occupation=null;
        hhHeadship=0;
        health=0;
        educationLevel=0;
        hhEducationLevel=0;
        childEducationLevel=0;
        shelterAndHousing=0;
        foodSecurityAndNutrition=0;
        protection=0;
        meansOfLivelihood=0;
        hhIncome=0;
        eligibleForEnrollment=null;
        nameOfAssessor=null;
        designation=null;
        stateCode=null;
        lgaCode=null;
        orgCode=null;
        communityCode=null;
        latitude=0.0;
        longitude=0.0;
        hivStatus="select";
        enrolledOnART="No";
        facilityId="select";
    }
    /**
     * This is the action called from the Struts framework.
     * @param mapping The ActionMapping used to select this instance.
     * @param request The HTTP Request we are processing.
     * @return
     */
    public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {
        ActionErrors errors = new ActionErrors();
        if(getActionName()==null || getActionName().equalsIgnoreCase("hhviDetails") || getActionName().equalsIgnoreCase("delete") || getActionName().equalsIgnoreCase("cboList")|| getActionName().equalsIgnoreCase("wardList"))
        return errors;
        else if(getCommunityCode()==null || getCommunityCode().length()<1)
        errors.add("communityCode", new ActionMessage("errors.communityCode.required"));
        else if(getHhUniqueId()==null || getHhUniqueId().length()<1)
        errors.add("hhUniqueId", new ActionMessage("errors.hhUniqueId.required"));
        else if( getDateOfAssessment()==null ||  getDateOfAssessment().indexOf("/")==-1)
        errors.add("dateOfAssessment", new ActionMessage("errors.dateOfAssessment.required"));
        else if( getDateOfAssessment()!=null &&  getDateOfAssessment().indexOf("/")!=-1)
        {
            String[] dateArray=getDateOfAssessment().split("/");
            if(dateArray.length != 3)
            errors.add("dateOfAssessment", new ActionMessage("errors.dateOfAssessment.required"));
            else if(!ValidationManager.compareDateWithCurrentDate(getDateOfAssessment()))
            errors.add("dateOfAssessment", new ActionMessage("errors.dateOfAssessment.postdated"));
        }
        if(errors.isEmpty())
        {
            AppUtility appUtil=new AppUtility();
            appUtil.isString(phone);
            if(getHhSurname()==null || !appUtil.isString(getHhSurname()))
            errors.add("hhSurname", new ActionMessage("errors.hhSurname.required"));
            else if(getHhFirstname()==null || !appUtil.isString(getHhFirstname()))
            errors.add("hhFirstname", new ActionMessage("errors.hhFirstname.required"));
            else if(!appUtil.isString(getHhGender()))
            errors.add("hhGender", new ActionMessage("errors.hhGender.required"));
            else if(!isHouseholdAccessed())
            errors.add("thematicAreas", new ActionMessage("errors.thematicAreas.required"));
            else if(getHhHeadship()==4 && getHhAge()>21)
            errors.add("hhHeadship", new ActionMessage("errors.childHeadedHousehold.wrong"));
            else if(getHhHeadship()!=4 && getHhAge()<18)
            errors.add("hhHeadship", new ActionMessage("errors.childHeadedHousehold.NotSelected"));
            else if(getHhAge()<10)
            errors.add("hhAge", new ActionMessage("errors.hhAge.wrong"));
            else if( getEligibleForEnrollment()==null ||  getEligibleForEnrollment().length()<1)
            errors.add("eligibleForEnrollment", new ActionMessage("errors.eligibleForEnrollment.required"));
            else if( getNoOfChildrenInhh()<1)
            errors.add("noOfChildrenInhh", new ActionMessage("errors.noOfChildrenInhh.required"));
            else if( getNoOfPeopleInhh()< getNoOfChildrenInhh())
            errors.add("noOfPeopleInhh", new ActionMessage("errors.noOfPeopleInhh.invalid"));
            else if(getHhEducationLevel()==0 && getEducationLevel()==0)
            errors.add("hhEducationLevel", new ActionMessage("errors.hhEducationLevel.invalid"));
        }
        return errors;
    }
}
